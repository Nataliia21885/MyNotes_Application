<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
        xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/layout}"
      lang="en">
<body>
<div>
<section layout:fragment="content">
    <div class="container" th:if = "${#lists.isEmpty(notes)}">
        <h3> You didn't create any note </h3>
        <form action="/notes/create" method="GET">
            <button type="submit">
                Create note
            </button>
        </form>
    </div>
    <div class="container" th:if = "${not #lists.isEmpty(notes)}">
        <h3>
            My notes - <span th:text="${notes.size()}"></span>> pcs.
        </h3>
        <form action="/notes/create" method="GET">
            <button type="submit">
                Create note
            </button>
        </form>
        <table class="table table-striped" >
            <thead>
            <tr>
                <th>Title</th>
                <th>Content</th>
                <th>Access</th>
                <th colspan="3">Managing</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="note : ${notes}">
                <td th:text="${note.name}"></td>
                <td th:text="${note.content}"></td>
                <td th:text="${note.accessType}"></td>
                <td>
                    <form action="/notes/delete" method="GET">
                        <input type="hidden" name="id" th:attr="value=${note.id}">
                        <button type="submit">
                            <img src="src/main/resources/static/icons/trash.png" alt="buttonpng" border="0" />
                        </button>
                    </form>
                </td>
                <td>
                    <form action="/notes/{note.id}" method="GET">
                        <input type="hidden" name="id" th:attr="value=${note.id}">
                        <button type="submit">
                            <img src="resources/static/icons/edit.png" alt="buttonpng" border="0" />
                        </button>
                    </form>
                </td>
                <td>
                    <form action="/notes/copyLink" method="GET">
                        <input type="hidden" name="id" th:attr="value=${note.id}">
                        <button type="submit">
                            <img src="static/icons/link-alt.png" alt="buttonpng" border="0" />
                        </button>
                    </form>
                </td>
            </tr>
            </tbody>
        </table>
    </div>
</section>
</div>

<script layout:fragment="script">
        function copy(id) {
            var copiedtext = document.getElementById(id);
            copiedtext.select();
            copiedtext.setSelectionRange(0, 99999); //for mobile devices
            navigator.clipboard.writeText(copiedtext.value);
            alert("You just copied " + copiedtext.value);
        }

        function makeDELETErequest(urlParametr) {
            if (confirm('Are you sure you want to delete this?')) {
                $.ajax({
                    url: urlParametr,
                    type: 'DELETE',
                    success: function () {
                        location.reload();
                    },
                    error: function (jqXHR, data, textStatus, errorThrown) {

                    }
                });
            }
        }
</script>

</body>
</html>
